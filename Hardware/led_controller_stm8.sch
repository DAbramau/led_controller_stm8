EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Text Label 9450 2600 2    50   ~ 0
BTN
$Comp
L local:STM8_Prog_Conn J1
U 1 1 6151301A
P 2500 2000
F 0 "J1" H 2808 2165 50  0000 C CNN
F 1 "PROGRAMMING" H 2808 2074 50  0000 C CNN
F 2 "local:IDC-1.27-6P" H 2750 1250 50  0001 C CNN
F 3 "" H 2500 2000 50  0001 C CNN
	1    2500 2000
	1    0    0    -1  
$EndComp
NoConn ~ 3100 2100
$Comp
L power:GND #PWR04
U 1 1 6151646F
P 3100 2200
F 0 "#PWR04" H 3100 1950 50  0001 C CNN
F 1 "GND" V 3105 2072 50  0000 R CNN
F 2 "" H 3100 2200 50  0001 C CNN
F 3 "" H 3100 2200 50  0001 C CNN
	1    3100 2200
	0    -1   -1   0   
$EndComp
$Comp
L power:GND #PWR07
U 1 1 615167B6
P 6300 3500
F 0 "#PWR07" H 6300 3250 50  0001 C CNN
F 1 "GND" H 6305 3327 50  0000 C CNN
F 2 "" H 6300 3500 50  0001 C CNN
F 3 "" H 6300 3500 50  0001 C CNN
	1    6300 3500
	1    0    0    -1  
$EndComp
Wire Wire Line
	6400 3400 6300 3400
Wire Wire Line
	6300 3400 6300 3500
Text Label 3600 2300 2    50   ~ 0
NRST
Wire Wire Line
	3100 2300 3600 2300
Wire Wire Line
	3100 2400 3600 2400
Text Label 3600 2400 2    50   ~ 0
SWIM
Wire Wire Line
	3100 2500 3600 2500
Text Label 3600 2500 2    50   ~ 0
MCU_TX
Wire Wire Line
	3100 2600 3600 2600
Text Label 3600 2600 2    50   ~ 0
MCU_RX
Text Label 9450 2300 2    50   ~ 0
MCU_RX
Text Label 9450 2200 2    50   ~ 0
MCU_TX
Wire Wire Line
	6400 3100 6150 3100
Text Label 6150 3100 0    50   ~ 0
NRST
Text Label 9450 3200 2    50   ~ 0
SWIM
$Comp
L Device:C C3
U 1 1 6151911B
P 6200 2700
F 0 "C3" V 5948 2700 50  0000 C CNN
F 1 "1uF" V 6039 2700 50  0000 C CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 6238 2550 50  0001 C CNN
F 3 "~" H 6200 2700 50  0001 C CNN
	1    6200 2700
	0    1    1    0   
$EndComp
Wire Wire Line
	6400 2700 6350 2700
$Comp
L power:GND #PWR05
U 1 1 6151A8AA
P 5950 2750
F 0 "#PWR05" H 5950 2500 50  0001 C CNN
F 1 "GND" H 5955 2577 50  0000 C CNN
F 2 "" H 5950 2750 50  0001 C CNN
F 3 "" H 5950 2750 50  0001 C CNN
	1    5950 2750
	1    0    0    -1  
$EndComp
Wire Wire Line
	6050 2700 5950 2700
Wire Wire Line
	5950 2700 5950 2750
NoConn ~ 6400 2300
NoConn ~ 6400 2400
NoConn ~ 8600 2500
NoConn ~ 8600 2800
NoConn ~ 8600 2900
NoConn ~ 8600 3000
NoConn ~ 8600 3100
$Comp
L Device:C C1
U 1 1 6151C788
P 5550 2300
F 0 "C1" H 5435 2254 50  0000 R CNN
F 1 "10uF" H 5435 2345 50  0000 R CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 5588 2150 50  0001 C CNN
F 3 "~" H 5550 2300 50  0001 C CNN
	1    5550 2300
	-1   0    0    1   
$EndComp
$Comp
L Device:C C2
U 1 1 6151CD4B
P 5950 2300
F 0 "C2" H 5835 2254 50  0000 R CNN
F 1 "0.1uF" H 5835 2345 50  0000 R CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.15x1.40mm_HandSolder" H 5988 2150 50  0001 C CNN
F 3 "~" H 5950 2300 50  0001 C CNN
	1    5950 2300
	-1   0    0    1   
$EndComp
Wire Wire Line
	5550 2150 5550 2100
Wire Wire Line
	5950 2100 5950 2150
Wire Wire Line
	5550 2450 5750 2450
$Comp
L power:GND #PWR02
U 1 1 6151E2E8
P 5750 2500
F 0 "#PWR02" H 5750 2250 50  0001 C CNN
F 1 "GND" H 5755 2327 50  0000 C CNN
F 2 "" H 5750 2500 50  0001 C CNN
F 3 "" H 5750 2500 50  0001 C CNN
	1    5750 2500
	1    0    0    -1  
$EndComp
Wire Wire Line
	5750 2450 5750 2500
Connection ~ 5750 2450
Wire Wire Line
	5750 2450 5950 2450
Wire Wire Line
	5950 2100 6400 2100
Connection ~ 5950 2100
$Comp
L Connector_Generic:Conn_01x03 J2
U 1 1 6152FA7C
P 10450 2700
F 0 "J2" H 10530 2742 50  0000 L CNN
F 1 "WS_LED" H 10530 2651 50  0000 L CNN
F 2 "Connector_JST:JST_XH_S3B-XH-A-1_1x03_P2.50mm_Horizontal" H 10450 2700 50  0001 C CNN
F 3 "~" H 10450 2700 50  0001 C CNN
	1    10450 2700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR06
U 1 1 6153037D
P 10200 2900
F 0 "#PWR06" H 10200 2650 50  0001 C CNN
F 1 "GND" V 10205 2772 50  0000 R CNN
F 2 "" H 10200 2900 50  0001 C CNN
F 3 "" H 10200 2900 50  0001 C CNN
	1    10200 2900
	1    0    0    -1  
$EndComp
$Comp
L power:+BATT #PWR01
U 1 1 615313B5
P 5750 2050
F 0 "#PWR01" H 5750 1900 50  0001 C CNN
F 1 "+BATT" H 5765 2223 50  0000 C CNN
F 2 "" H 5750 2050 50  0001 C CNN
F 3 "" H 5750 2050 50  0001 C CNN
	1    5750 2050
	1    0    0    -1  
$EndComp
Wire Wire Line
	5550 2100 5750 2100
Connection ~ 5750 2100
Wire Wire Line
	5750 2100 5950 2100
Wire Wire Line
	5750 2050 5750 2100
$Comp
L power:+BATT #PWR03
U 1 1 61532E62
P 10200 2500
F 0 "#PWR03" H 10200 2350 50  0001 C CNN
F 1 "+BATT" V 10215 2627 50  0000 L CNN
F 2 "" H 10200 2500 50  0001 C CNN
F 3 "" H 10200 2500 50  0001 C CNN
	1    10200 2500
	1    0    0    -1  
$EndComp
$Comp
L Device:Battery_Cell BT1
U 1 1 61543A54
P 2000 5250
F 0 "BT1" H 2118 5346 50  0000 L CNN
F 1 "Battery_Cell" H 2118 5255 50  0001 L CNN
F 2 "local:CB_18650_PC2" V 2000 5310 50  0001 C CNN
F 3 "~" V 2000 5310 50  0001 C CNN
	1    2000 5250
	1    0    0    -1  
$EndComp
$Comp
L local:STM8S103F3 U1
U 1 1 6150E75A
P 7500 2500
F 0 "U1" H 7500 3165 50  0000 C CNN
F 1 "STM8S103F3" H 7500 3074 50  0000 C CNN
F 2 "Package_SO:TSSOP-20_4.4x6.5mm_P0.65mm" H 7500 1450 50  0001 C CNN
F 3 "" H 7500 2500 50  0001 C CNN
	1    7500 2500
	1    0    0    -1  
$EndComp
$Comp
L Transistor_FET:IRLML6401 Q1
U 1 1 617C7128
P 2500 4600
F 0 "Q1" V 2842 4600 50  0000 C CNN
F 1 "IRLML6401" V 2751 4600 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 2700 4525 50  0001 L CIN
F 3 "https://www.infineon.com/dgdl/irlml6401pbf.pdf?fileId=5546d462533600a401535668b96d2634" H 2500 4600 50  0001 L CNN
	1    2500 4600
	0    -1   -1   0   
$EndComp
$Comp
L Device:R R4
U 1 1 617CA115
P 2500 5650
F 0 "R4" H 2570 5696 50  0000 L CNN
F 1 "150k" H 2570 5605 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 2430 5650 50  0001 C CNN
F 3 "~" H 2500 5650 50  0001 C CNN
	1    2500 5650
	1    0    0    -1  
$EndComp
$Comp
L Device:R R1
U 1 1 617CA93F
P 3300 4750
F 0 "R1" H 3370 4796 50  0000 L CNN
F 1 "150k" H 3370 4705 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 3230 4750 50  0001 C CNN
F 3 "~" H 3300 4750 50  0001 C CNN
	1    3300 4750
	1    0    0    -1  
$EndComp
$Comp
L Transistor_FET:IRLML6401 Q2
U 1 1 617CB44C
P 3900 4600
F 0 "Q2" V 4242 4600 50  0000 C CNN
F 1 "IRLML6401" V 4151 4600 50  0000 C CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 4100 4525 50  0001 L CIN
F 3 "https://www.infineon.com/dgdl/irlml6401pbf.pdf?fileId=5546d462533600a401535668b96d2634" H 3900 4600 50  0001 L CNN
	1    3900 4600
	0    1    -1   0   
$EndComp
$Comp
L Switch:SW_Push SW1
U 1 1 617CBF28
P 3300 5700
F 0 "SW1" H 3300 5985 50  0000 C CNN
F 1 "SW_Push" H 3300 5894 50  0000 C CNN
F 2 "Button_Switch_THT:SW_PUSH_6mm_H13mm" H 3300 5900 50  0001 C CNN
F 3 "~" H 3300 5900 50  0001 C CNN
	1    3300 5700
	0    -1   -1   0   
$EndComp
$Comp
L Transistor_FET:2N7002 Q3
U 1 1 617D2739
P 4000 5300
F 0 "Q3" H 4205 5346 50  0000 L CNN
F 1 "2N7002" H 4205 5255 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 4200 5225 50  0001 L CIN
F 3 "https://www.onsemi.com/pub/Collateral/NDS7002A-D.PDF" H 4000 5300 50  0001 L CNN
	1    4000 5300
	-1   0    0    -1  
$EndComp
Wire Wire Line
	3900 5100 3900 4950
Wire Wire Line
	3300 4900 3300 4950
Wire Wire Line
	3300 4950 3900 4950
Connection ~ 3900 4950
Wire Wire Line
	3900 4950 3900 4800
Wire Wire Line
	3700 4500 3300 4500
Wire Wire Line
	3300 4600 3300 4500
Connection ~ 3300 4500
Wire Wire Line
	3300 4500 2700 4500
Wire Wire Line
	2500 4800 2500 5500
Wire Wire Line
	3300 5500 3300 4950
Connection ~ 3300 4950
$Comp
L Device:R R3
U 1 1 617E0DB5
P 4350 5500
F 0 "R3" H 4420 5546 50  0000 L CNN
F 1 "150k" H 4420 5455 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 4280 5500 50  0001 C CNN
F 3 "~" H 4350 5500 50  0001 C CNN
	1    4350 5500
	1    0    0    -1  
$EndComp
Wire Wire Line
	4200 5300 4350 5300
Wire Wire Line
	4350 5300 4350 5350
Wire Wire Line
	3900 5750 4350 5750
Wire Wire Line
	4350 5750 4350 5650
Wire Wire Line
	3900 5500 3900 5750
$Comp
L Transistor_BJT:MMBT3904 Q4
U 1 1 617E46B2
P 4700 5750
F 0 "Q4" H 4891 5796 50  0000 L CNN
F 1 "MMBT3904" H 4891 5705 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 4900 5675 50  0001 L CIN
F 3 "https://www.onsemi.com/pub/Collateral/2N3903-D.PDF" H 4700 5750 50  0001 L CNN
	1    4700 5750
	1    0    0    -1  
$EndComp
Wire Wire Line
	4350 5750 4500 5750
Connection ~ 4350 5750
$Comp
L Device:R R5
U 1 1 617E80CD
P 4800 6200
F 0 "R5" H 4870 6246 50  0000 L CNN
F 1 "100" H 4870 6155 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 4730 6200 50  0001 C CNN
F 3 "~" H 4800 6200 50  0001 C CNN
	1    4800 6200
	1    0    0    -1  
$EndComp
Wire Wire Line
	4800 5950 4800 6050
$Comp
L Device:R R2
U 1 1 617E938D
P 4800 4950
F 0 "R2" H 4870 4996 50  0000 L CNN
F 1 "15k" H 4870 4905 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 4730 4950 50  0001 C CNN
F 3 "~" H 4800 4950 50  0001 C CNN
	1    4800 4950
	1    0    0    -1  
$EndComp
$Comp
L Diode:BAV99 D1
U 1 1 617E9ED2
P 5500 4900
F 0 "D1" V 5454 4979 50  0000 L CNN
F 1 "BAV99" V 5545 4979 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23" H 5500 4400 50  0001 C CNN
F 3 "https://assets.nexperia.com/documents/data-sheet/BAV99_SER.pdf" H 5500 4900 50  0001 C CNN
	1    5500 4900
	0    -1   1    0   
$EndComp
$Comp
L Device:R R6
U 1 1 617EAE3A
P 5500 6200
F 0 "R6" H 5570 6246 50  0000 L CNN
F 1 "150k" H 5570 6155 50  0000 L CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 5430 6200 50  0001 C CNN
F 3 "~" H 5500 6200 50  0001 C CNN
	1    5500 6200
	1    0    0    -1  
$EndComp
Wire Wire Line
	4800 5100 4800 5500
Wire Wire Line
	4100 4500 4800 4500
Wire Wire Line
	4800 4800 4800 4500
Connection ~ 4800 4500
Wire Wire Line
	4800 4500 5500 4500
Wire Wire Line
	5500 6350 5500 6500
Wire Wire Line
	5500 6500 4800 6500
Wire Wire Line
	2500 5800 2500 6500
Wire Wire Line
	3300 5900 3300 6500
Connection ~ 3300 6500
Wire Wire Line
	4800 6350 4800 6500
Connection ~ 4800 6500
Wire Wire Line
	4800 6500 3300 6500
Wire Wire Line
	2000 4500 2300 4500
Wire Wire Line
	2000 4500 2000 5050
Wire Wire Line
	2000 5350 2000 6500
Wire Wire Line
	2000 6500 2500 6500
Connection ~ 2500 6500
Wire Wire Line
	2500 6500 3300 6500
Wire Wire Line
	4350 5300 6500 5300
Connection ~ 4350 5300
Wire Wire Line
	5500 4500 5500 4600
Wire Wire Line
	5500 5200 5500 6050
$Comp
L power:GND #PWR09
U 1 1 617FB7D0
P 3300 6500
F 0 "#PWR09" H 3300 6250 50  0001 C CNN
F 1 "GND" H 3305 6327 50  0000 C CNN
F 2 "" H 3300 6500 50  0001 C CNN
F 3 "" H 3300 6500 50  0001 C CNN
	1    3300 6500
	1    0    0    -1  
$EndComp
$Comp
L power:+BATT #PWR08
U 1 1 617FBE1A
P 4800 4500
F 0 "#PWR08" H 4800 4350 50  0001 C CNN
F 1 "+BATT" H 4815 4673 50  0000 C CNN
F 2 "" H 4800 4500 50  0001 C CNN
F 3 "" H 4800 4500 50  0001 C CNN
	1    4800 4500
	1    0    0    -1  
$EndComp
$Comp
L power:PWR_FLAG #FLG01
U 1 1 617FCEB8
P 5500 4500
F 0 "#FLG01" H 5500 4575 50  0001 C CNN
F 1 "PWR_FLAG" H 5500 4673 50  0000 C CNN
F 2 "" H 5500 4500 50  0001 C CNN
F 3 "~" H 5500 4500 50  0001 C CNN
	1    5500 4500
	1    0    0    -1  
$EndComp
Connection ~ 5500 4500
Connection ~ 4800 5500
Wire Wire Line
	4800 5500 4800 5550
Wire Wire Line
	4800 5500 6500 5500
Wire Wire Line
	5500 5200 6500 5200
Connection ~ 5500 5200
Wire Wire Line
	5700 4900 6500 4900
Text Label 6500 4900 2    50   ~ 0
BAT_ADC_1
Text Label 6500 5200 2    50   ~ 0
BAT_ADC_2
Text Label 6500 5300 2    50   ~ 0
PWR_EN
Text Label 6500 5500 2    50   ~ 0
BTN
Wire Wire Line
	8600 2200 9450 2200
Wire Wire Line
	8600 2300 9450 2300
Wire Wire Line
	8600 2600 9450 2600
Wire Wire Line
	8600 3200 9450 3200
Wire Wire Line
	8600 2100 9450 2100
Text Label 9450 2100 2    50   ~ 0
PWR_EN
NoConn ~ 8600 2400
Wire Wire Line
	8600 3400 9450 3400
Wire Wire Line
	8600 3300 9450 3300
Text Label 9450 3300 2    50   ~ 0
BAT_ADC_2
Text Label 9450 3400 2    50   ~ 0
BAT_ADC_1
Wire Wire Line
	10250 2800 10200 2800
Wire Wire Line
	10200 2800 10200 2900
Wire Wire Line
	10200 2500 10200 2600
Wire Wire Line
	10200 2600 10250 2600
Text Label 9450 2700 2    50   ~ 0
WS_LED
$Comp
L Device:R R7
U 1 1 61585399
P 9800 2700
F 0 "R7" V 9593 2700 50  0000 C CNN
F 1 "470" V 9684 2700 50  0000 C CNN
F 2 "Resistor_SMD:R_0805_2012Metric_Pad1.15x1.40mm_HandSolder" V 9730 2700 50  0001 C CNN
F 3 "~" H 9800 2700 50  0001 C CNN
	1    9800 2700
	0    1    1    0   
$EndComp
$Comp
L Connector_Generic:Conn_01x03 J3
U 1 1 615A65A3
P 10450 3650
F 0 "J3" H 10530 3692 50  0000 L CNN
F 1 "WS_LED" H 10530 3601 50  0000 L CNN
F 2 "Connector_JST:JST_XH_B3B-XH-A_1x03_P2.50mm_Vertical" H 10450 3650 50  0001 C CNN
F 3 "~" H 10450 3650 50  0001 C CNN
	1    10450 3650
	1    0    0    -1  
$EndComp
Wire Wire Line
	10200 2600 10100 2600
Wire Wire Line
	10100 2600 10100 3550
Wire Wire Line
	10100 3550 10250 3550
Connection ~ 10200 2600
Wire Wire Line
	10200 2800 10050 2800
Wire Wire Line
	10050 2800 10050 3750
Wire Wire Line
	10050 3750 10250 3750
Connection ~ 10200 2800
Wire Wire Line
	9650 2700 8600 2700
Wire Wire Line
	9950 2700 10000 2700
Wire Wire Line
	10000 2700 10000 3650
Wire Wire Line
	10000 3650 10250 3650
Connection ~ 10000 2700
Wire Wire Line
	10000 2700 10250 2700
$EndSCHEMATC
